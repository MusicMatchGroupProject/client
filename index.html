<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="google-signin-client_id" content="538354353006-m1asnrg9t3e0vp3j1tk30chuknv12dv7.apps.googleusercontent.com">
    <link href="https://fonts.googleapis.com/css?family=Pacifico" rel="stylesheet"> 
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css" type="text/css">
    <title>Document</title>
</head>
<body>
    <div id="app">

    </div>
    <div id="login">
        <div class="wrapper fadeInDown">
            <div id="formContent">
                <!-- Icon -->
                <div class="fadeIn first">
                <img class="my-4" src="http://cdn.jalanroot.com/images/profile/16082018203028-apple_music_logo_by_mattroxzworld-d982zrj.png" style="width: 25%; height:25%">
                <h1 class="title-app">MusicMatch</h1>
                </div>
                <!-- Login Form -->
                <form id="login-form">
                    <input type="text" id="emailLogin" class="fadeIn second" name="login" placeholder="username">
                    <input type="password" id="passwordLogin" class="fadeIn third" name="login" placeholder="password">
                    <input type="submit"  class="fadeIn fourth" value="Log In">
                </form>
            
                <!-- Remind Passowrd -->
                <div id="formFooter">
                    <a class="g-signin2" data-onsuccess="onSignIn"></a>
                    <a class="underlineHover" href="#"> Register</a>
                </div>
            </div>
        </div>  
    </div>
    <div id="register">
        <div class="wrapper fadeInDown">
            <div id="formContent">
                <!-- Icon -->
                <div class="fadeIn first">
                <img class="my-4" src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/Musixmatch_logo.svg/2000px-Musixmatch_logo.svg.png" style="width: 25%; height:25%">
                <h1>MusicMatch</h1>
                </div>
                <!-- Login Form -->
                <form id="login-form">
                    <input type="text" id="emailRegister" class="fadeIn second" name="register" placeholder="username">
                    <input type="password" id="passwordRegister" class="fadeIn third" name="register" placeholder="password">
                    <input type="text" id="firstName" class="fadeIn second" name="register" placeholder="first name">
                    <input type="text" id="lastName" class="fadeIn third" name="register" placeholder="last name">
                    <input type="submit"  class="fadeIn fourth" value="Register">
                </form>
            
                <!-- Remind Passowrd -->
                <div id="formFooter">
                    <a class="g-signin2" data-onsuccess="onSignIn"></a>
                    <a class="underlineHover" href="#"> Login</a>
                </div>
            </div>
        </div>  
    </div>

    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script>
        $(document).ready(function() {
            console.log( "ready!" );
            checkLogin()
        });
        $('#login-form').submit(function(e){
            e.preventDefault();
            var input = {
                email : $('#emailLogin').val(),
                password : $('#passwordLogin').val()
            }
            $.ajax({
					type: 'POST',
					url: 'http://localhost:3000/login/',
					dataType: 'json',
					data: input
				})
				.done(function(dataLogin){
					console.log(dataLogin,"ccccccc")
                    localStorage.setItem('token', dataLogin.token)
                    checkLogin()
				})
				.fail(function(error){
                    console.log(error)
            })
        })
        function checkLogin(){
            if(localStorage.getItem("token")){
                $('#app').show()
                $('#login').hide()
                $('#register').hide()
                getMyStar()
            }else{
                $('#app').hide()
                $('#register').hide()
                $('#login').show()  
            }
        }
        function logout(){
            localStorage.removeItem('token')
            signOutGoogle()
            checkLogin()
        }
        </script>
</body>
</html>